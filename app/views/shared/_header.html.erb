<%# app/views/shared/_header.html.erb %>
<nav data-controller="menu" class="navbar navbar-dark bg-dark">
  <div class="container-fluid">
    <!-- タイトル -->
    <%= link_to "ウソ写真", root_path, class: "navbar-brand" %>

    <!-- 開くボタン -->
    <button type="button"
            data-action="click->menu#toggle"
            data-menu-target="icon"
            class="menu-button border-0 bg-transparent">
      <span class="menu-icon"></span>
    </button>
  </div>

  <!-- メニュー本体 -->
  <div data-menu-target="panel" class="menu-panel position-fixed top-0 end-0 vh-100 bg-white shadow">
    <!-- 閉じるボタン -->
    <button type="button"
            class="btn-close m-3 ms-auto d-block"
            data-action="click->menu#toggle"
            aria-label="Close menu"></button>

    <ul class="list-unstyled p-3">
      <!-- 公開ページへのリンク -->
      <li class="mb-2">
        <%= link_to "TOP", root_path, class: "text-decoration-none text-dark" %>
      </li>
      <li class="mb-2">
        <%= link_to "記事一覧", articles_path, class: "text-decoration-none text-dark" %>
      </li>

      <% if user_signed_in? %>
        <% if current_user.admin? %>
          <!-- 管理画面リンク（Adminユーザーのみ） -->
          <li class="mb-2">
            <%= link_to "管理画面", admin_articles_path, class: "text-decoration-none text-dark" %>
          </li>
        <% end %>

        <!-- ログアウト -->
        <li class="mb-2">
          <%= link_to "ログアウト", destroy_user_session_path,
                      method: :delete,
                      data: { confirm: "本当にログアウトしますか？" },
                      class: "text-decoration-none text-dark" %>
        </li>
      <% else %>
        <!-- ログイン -->
        <li class="mb-2">
          <%= link_to "ログイン", new_user_session_path, class: "text-decoration-none text-dark" %>
        </li>
      <% end %>
    </ul>
  </div>
</nav>